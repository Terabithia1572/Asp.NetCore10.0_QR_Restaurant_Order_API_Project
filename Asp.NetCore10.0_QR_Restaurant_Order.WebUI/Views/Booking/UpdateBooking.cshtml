@using Asp.NetCore10._0_QR_Restaurant_Order.WebUI.DTOs.BookingDTOs
@model UpdateBookingDTO

@{
    ViewData["Title"] = "Rezervasyon Güncelle";
    Layout = "~/Views/AdminLayout/Index.cshtml";
    ViewData["Breadcrumb"] = new List<(string Text, string Url)>
    {
        ("Rezervasyonlar", "/Booking/BookingList/"),
        ("Rezervasyon Güncelle", "")
    };
}

<div class="card bg-white p-20 rounded-10 border border-white mb-4">
    <form method="post" asp-action="UpdateBooking">
        <div class="row">

            @* Update için ID mutlaka taşınmalı *@
            <input type="hidden" asp-for="BookingID" />

            <!-- SOL TARAF -->
            <div class="col-lg-8">
                <h3 class="mb-20">Rezervasyon Güncelle</h3>

                <div class="row">

                    <div class="col-lg-6">
                        <div class="mb-20">
                            <label class="label fs-16 mb-2">Ad Soyad</label>
                            <div class="form-floating">
                                <input asp-for="BookingName" type="text" class="form-control" id="floatingName2" placeholder="Ad Soyad">
                                <label for="floatingName2">Ad Soyad</label>
                            </div>
                            <span class="text-danger" asp-validation-for="BookingName"></span>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="mb-20">
                            <label class="label fs-16 mb-2">Telefon</label>
                            <div class="form-floating">
                                <input asp-for="BookingPhone" type="text" class="form-control" id="floatingPhone2" placeholder="Telefon">
                                <label for="floatingPhone2">Telefon</label>
                            </div>
                            <span class="text-danger" asp-validation-for="BookingPhone"></span>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="mb-20">
                            <label class="label fs-16 mb-2">Mail</label>
                            <div class="form-floating">
                                <input asp-for="BookingMail" type="email" class="form-control" id="floatingMail2" placeholder="Mail">
                                <label for="floatingMail2">Mail</label>
                            </div>
                            <span class="text-danger" asp-validation-for="BookingMail"></span>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="mb-20">
                            <label class="label fs-16 mb-2">Kişi Sayısı</label>
                            <div class="form-floating">
                                <input asp-for="BookingPersonCount" type="number" min="1" class="form-control" id="floatingCount2" placeholder="Kişi Sayısı">
                                <label for="floatingCount2">Kişi Sayısı</label>
                            </div>
                            <span class="text-danger" asp-validation-for="BookingPersonCount"></span>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="mb-20">
                            <label class="label fs-16 mb-2">Tarih</label>
                            <div class="form-floating">
                                @* datetime-local ile model bind:
                                   Model.BookingDate DateTime ise input value otomatik her zaman doğru format gelmeyebilir.
                                   Bu yüzden value’yu burada formatlayarak verdik. *@
                                <input name="BookingDate"
                                       type="datetime-local"
                                       class="form-control"
                                       id="floatingDate2"
                                       value="@(Model.BookingDate.ToString("yyyy-MM-ddTHH:mm"))" />
                                <label for="floatingDate2">Tarih</label>
                            </div>
                            <span class="text-danger" asp-validation-for="BookingDate"></span>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="mb-20">
                            <label class="label fs-16 mb-2">Durum</label>
                            <div class="form-floating">
                                <select asp-for="BookingStatus" class="form-select form-control" id="floatingStatus2">
                                    <option value="true">Aktif</option>
                                    <option value="false">Pasif</option>
                                </select>
                                <label for="floatingStatus2">Durum</label>
                            </div>
                            <span class="text-danger" asp-validation-for="BookingStatus"></span>
                        </div>
                    </div>

                    <div class="col-lg-12">
                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-primary fw-normal text-white">Güncelle</button>
                            <a href="/Booking/BookingList/" class="btn btn-danger fw-normal text-white">İptal</a>
                        </div>
                    </div>

                </div>
            </div>

            <!-- SAĞ TARAF -->
            <div class="col-lg-4">
                <h3 class="mb-20">Özet</h3>

                <div class="card p-3 border">
                    <div class="fw-semibold">@Model.BookingName</div>
                    <small class="text-muted d-block">Mail: @Model.BookingMail</small>
                    <small class="text-muted d-block">Telefon: @Model.BookingPhone</small>
                    <small class="text-muted d-block">Kişi: @Model.BookingPersonCount</small>
                    <small class="text-muted d-block">Tarih: @Model.BookingDate.ToString("dd.MM.yyyy HH:mm")</small>
                    <small class="text-muted d-block">Durum: @(Model.BookingStatus ? "Aktif" : "Pasif")</small>
                </div>
            </div>

        </div>
    </form>
</div>
